<Page
    x:Class="Yttrium_browser.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Project_Radon.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="using:CommunityToolkit.WinUI.Controls"
    xmlns:winui="using:Microsoft.UI.Xaml.Controls"
    x:Name="MainWindow"
    DataContext="BrowserTabViewModel"
    mc:Ignorable="d">
    <Page.KeyboardAccelerators>
        <KeyboardAccelerator
            Key="T"
            Invoked="NewTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="W"
            Invoked="CloseSelectedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number1"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number2"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number3"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number4"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number5"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number6"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number7"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number8"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="Number9"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="LeftButton"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
        <KeyboardAccelerator
            Key="RightButton"
            Invoked="NavigateToNumberedTabKeyboardAccelerator_Invoked"
            Modifiers="Control" />
    </Page.KeyboardAccelerators>
    <Page.Resources>
        <ResourceDictionary>
            <SolidColorBrush x:Key="TabViewItemHeaderBackgroundSelected" Color="Transparent" />
        </ResourceDictionary>

    </Page.Resources>

    <Grid x:Name="BasicGrid">

        <Grid.ChildrenTransitions>
            <TransitionCollection>
                <EntranceThemeTransition IsStaggeringEnabled="True" />
            </TransitionCollection>
        </Grid.ChildrenTransitions>

        <Image
            x:Name="appthemebackground"
            Opacity="1"
            Source="ms-appx:///wallpapers/10.png"
            Stretch="UniformToFill">
            <Image.OpacityTransition>
                <ScalarTransition />
            </Image.OpacityTransition>
        </Image>
        <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" Opacity="0.2" />


        <Grid>
            <Grid.ChildrenTransitions>
                <TransitionCollection>
                    <EntranceThemeTransition IsStaggeringEnabled="True" />
                </TransitionCollection>
            </Grid.ChildrenTransitions>
            <Grid x:Name="BaseGrid" SizeChanged="BaseGrid_SizeChanged">
                <Grid.ChildrenTransitions>
                    <TransitionCollection>
                        <EntranceThemeTransition IsStaggeringEnabled="True" />
                    </TransitionCollection>
                </Grid.ChildrenTransitions>
                <Grid
                    x:Name="TitleBarGrid"
                    Grid.Row="0"
                    Canvas.ZIndex="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition
                            x:Name="navbuttonbar"
                            Width="*"
                            MinWidth="143"
                            MaxWidth="400" />
                        <ColumnDefinition Width="3*" />
                        <ColumnDefinition
                            x:Name="righttitlebarpadding"
                            Width="*"
                            MinWidth="143"
                            MaxWidth="300" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition x:Name="DefaultBarUI" Height="38" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!--  titlebar drag area  -->
                    <Border
                        x:Name="DragArea"
                        Grid.RowSpan="2"
                        Grid.Column="0"
                        Grid.ColumnSpan="4"
                        Background="Transparent"
                        Canvas.ZIndex="0"
                        Loaded="DragArea_Loaded" />

                    <!--  refresh and home buttons  -->
                    <StackPanel
                        Grid.Row="0"
                        Grid.Column="0"
                        Margin="5,0,0,0"
                        VerticalAlignment="Center"
                        Canvas.ZIndex="1"
                        Orientation="Horizontal">
                        <winui:DropDownButton
                            x:Name="tabactions_button"
                            Margin="5,2,0,0"
                            Padding="7.2"
                            Background="Transparent"
                            BorderThickness="0">
                            <ToolTipService.ToolTip>
                                <StackPanel>
                                    <TextBlock FontWeight="SemiBold" Style="{ThemeResource CaptionTextBlockStyle}">Radon quick options</TextBlock>
                                    <TextBlock Style="{ThemeResource CaptionTextBlockStyle}">Access top-level actions such as navigation, view mode, tools and more.</TextBlock>
                                </StackPanel>
                            </ToolTipService.ToolTip>
                            <Image Margin="2" Source="ms-appx:///Assets/StoreLogo.png" />
                            <winui:DropDownButton.Flyout>
                                <MenuFlyout Placement="BottomEdgeAlignedLeft" ShouldConstrainToRootBounds="False">

                                    <MenuFlyoutItem
                                        x:Name="tabaction_inline"
                                        Width="250"
                                        Click="tabaction_inline_Click"
                                        IsEnabled="False"
                                        Text="Inline mode (wip)">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xf26b;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                    <MenuFlyoutItem
                                        x:Name="tabaction_titlebar"
                                        Width="250"
                                        Click="tabaction_titlebar_Click"
                                        Text="System titlebar">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xe967;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                    <MenuFlyoutItem
                                        Width="250"
                                        IsEnabled="False"
                                        Text="Snip tab (in development)">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xe931;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                    <MenuFlyoutItem
                                        Width="250"
                                        IsEnabled="False"
                                        Text="Web grabber (in development)">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xe8ac;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                    <MenuFlyoutItem
                                        Width="250"
                                        IsEnabled="False"
                                        Text="Generate QR code">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xed14;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                    <MenuFlyoutItem
                                        x:Name="tabactions_devtools"
                                        Width="250"
                                        Click="tabactions_devtools_Click"
                                        Text="Developer Tools">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xec7a;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>
                                    <MenuFlyoutItem
                                        x:Name="ChangeThemeButtonAction"
                                        Width="250"
                                        Click="ChangeThemeButton_Click"
                                        Text="Change theme">
                                        <MenuFlyoutItem.Icon>
                                            <FontIcon Glyph="&#xe771;" />
                                        </MenuFlyoutItem.Icon>
                                    </MenuFlyoutItem>


                                    <!--<Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left" Margin="0,0,0,0">
                                                        <StackPanel Orientation="Horizontal">
                                                            <FontIcon Glyph="&#xf7ed;" FontSize="16"/>
                                                            <TextBlock Margin="10,0,0,0" Text="New tab"/>
                                                        </StackPanel>
                                                    </Button>-->


                                </MenuFlyout>
                            </winui:DropDownButton.Flyout>
                        </winui:DropDownButton>
                        <Grid Width="8" />
                        <Button
                            x:Name="BackButton"
                            Margin="0,2,5,0"
                            Padding="3,6"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="BackButton_Click"
                            ClickMode="Press">
                            <ToolTipService.ToolTip>
                                <StackPanel>
                                    <TextBlock FontWeight="SemiBold" Style="{ThemeResource CaptionTextBlockStyle}">Go back (Alt + Left arrow)</TextBlock>
                                    <TextBlock Style="{ThemeResource CaptionTextBlockStyle}">Navigate to the most recently opened web page.</TextBlock>
                                </StackPanel>
                            </ToolTipService.ToolTip>
                            <FontIcon
                                x:Name="backbutton_icon"
                                FontFamily="Segoe Fluent Icons"
                                FontSize="20"
                                Glyph="&#xe973;"
                                Translation="0,0,0">
                                <FontIcon.TranslationTransition>
                                    <Vector3Transition />
                                </FontIcon.TranslationTransition>
                            </FontIcon>
                        </Button>
                        <Button
                            x:Name="ForwardButton"
                            Margin="0,2,5,0"
                            Padding="3,6"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="ForwardButton_Click"
                            ClickMode="Press">
                            <ToolTipService.ToolTip>
                                <StackPanel>
                                    <TextBlock FontWeight="SemiBold" Style="{ThemeResource CaptionTextBlockStyle}">Go forward (Alt + Right arrow)</TextBlock>
                                    <TextBlock Style="{ThemeResource CaptionTextBlockStyle}">Navigate to the page you've recently navigate back from.</TextBlock>
                                </StackPanel>
                            </ToolTipService.ToolTip>
                            <FontIcon
                                x:Name="forwardbutton_icon"
                                FontFamily="segoe fluent icons"
                                FontSize="20"
                                Glyph="&#xe974;"
                                Translation="0,0,0">
                                <FontIcon.TranslationTransition>
                                    <Vector3Transition />
                                </FontIcon.TranslationTransition>
                            </FontIcon>
                        </Button>


                        <Button
                            x:Name="HomeButton"
                            Margin="0,0,5,0"
                            Padding="8.5"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="HomeButton_Click"
                            ToolTipService.ToolTip="Start page"
                            Visibility="Collapsed">
                            <FontIcon
                                FontFamily="Segoe Fluent Icons"
                                FontSize="16"
                                Glyph="&#xe80f;" />
                        </Button>
                        <Button
                            x:Name="NavOverflowButton"
                            Padding="8.5"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="HomeButton_Click"
                            ToolTipService.ToolTip="Navigation options"
                            Visibility="Collapsed">
                            <FontIcon
                                FontFamily="Segoe Fluent Icons"
                                FontSize="16"
                                Glyph="&#xe70d;" />
                            <Button.Flyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem
                                        Width="150"
                                        Click="ForwardButton_Click"
                                        Icon="Forward"
                                        Text="Forward" />
                                    <MenuFlyoutItem
                                        Width="150"
                                        Click="RefreshButton_Click"
                                        Icon="Refresh"
                                        Text="Refresh" />
                                    <MenuFlyoutItem
                                        Width="150"
                                        Icon="Document"
                                        Text="Stop loading" />
                                    <MenuFlyoutItem
                                        Width="150"
                                        Click="HomeButton_Click"
                                        Icon="Home"
                                        Text="Start page" />
                                </MenuFlyout>
                            </Button.Flyout>
                        </Button>

                    </StackPanel>

                    <!--  SSL certification icon  -->
                    <Button
                        x:Name="SSLButton"
                        Grid.Row="0"
                        Grid.Column="1"
                        Margin="44,2,0,0"
                        Padding="6.9"
                        VerticalAlignment="Center"
                        Background="Transparent"
                        BorderThickness="0"
                        Canvas.ZIndex="1"
                        CornerRadius="40">
                        <ToolTipService.ToolTip>
                            <StackPanel>
                                <TextBlock FontWeight="SemiBold" Style="{ThemeResource CaptionTextBlockStyle}">Connection information</TextBlock>
                                <TextBlock Style="{ThemeResource CaptionTextBlockStyle}">Inspect your connection to the web provider and it's security status.</TextBlock>
                            </StackPanel>
                        </ToolTipService.ToolTip>
                        <FontIcon
                            x:Name="SSLIcon"
                            FontSize="15"
                            Glyph="&#xE72E;" />
                        <Button.Flyout>
                            <Flyout x:Name="SSLFlyout" ShouldConstrainToRootBounds="False">
                                <StackPanel Width="340">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon
                                            x:Name="SSLFlyoutIcon"
                                            FontSize="18"
                                            Glyph="&#xE72E;" />
                                        <TextBlock
                                            x:Name="SSLFlyoutHeader"
                                            Margin="10,0"
                                            Style="{ThemeResource BaseTextBlockStyle}"
                                            Text="Connection informations" />

                                    </StackPanel>
                                    <TextBlock
                                        x:Name="SSLFlyoutStatus"
                                        Margin="0,20,0,0"
                                        Text="Website's SSL status goes here."
                                        TextWrapping="WrapWholeWords" />
                                    <TextBlock
                                        x:Name="SSLFlyoutStatus2"
                                        Margin="0,15,0,10"
                                        Text="Website's SSL status goes here."
                                        TextWrapping="WrapWholeWords" />
                                </StackPanel>
                            </Flyout>
                        </Button.Flyout>

                    </Button>

                    <!--  search bar  -->

                    <TextBox
                        x:Name="SearchBar"
                        Grid.Column="1"
                        Height="21"
                        Margin="43,3,45,0"
                        Padding="50,6,50,2"
                        VerticalAlignment="Center"
                        VerticalContentAlignment="Center"
                        BorderBrush="Transparent"
                        BorderThickness="1"
                        CharacterSpacing="1"
                        CornerRadius="8"
                        FontSize="13"
                        FontWeight="Medium"
                        GotFocus="SearchBar_GotFocus"
                        IsSpellCheckEnabled="False"
                        KeyDown="SearchBar_KeyDown"
                        LostFocus="SearchBar_LostFocus"
                        PlaceholderForeground="{ThemeResource ContentDialogDimmingThemeBrush}"
                        PlaceholderText="Search the web or enter a URL"
                        TextAlignment="Center" />

                    <Button
                        x:Name="RefreshButton"
                        Grid.Column="1"
                        Margin="0,4,48,0"
                        Padding="6.5"
                        HorizontalAlignment="Right"
                        Background="{x:Null}"
                        BorderThickness="0"
                        Click="RefreshButton_Click"
                        CornerRadius="40"
                        PointerEntered="RefreshButton_PointerEntered">
                        <FontIcon
                            FontFamily="segoe fluent icons"
                            FontSize="13"
                            Glyph="&#xe72c;" />
                        <ToolTipService.ToolTip>
                            <StackPanel>
                                <TextBlock FontWeight="SemiBold" Style="{ThemeResource CaptionTextBlockStyle}">Refresh</TextBlock>
                                <TextBlock Style="{ThemeResource CaptionTextBlockStyle}">Reload this page again.</TextBlock>
                            </StackPanel>
                        </ToolTipService.ToolTip>
                    </Button>
                    <Button
                        x:Name="StopRefreshButton"
                        Grid.Column="1"
                        Margin="0,4,48,0"
                        Padding="6"
                        HorizontalAlignment="Right"
                        Background="Transparent"
                        BorderThickness="0"
                        Click="StopRefreshButton_Click"
                        CornerRadius="40"
                        Visibility="Collapsed">
                        <FontIcon
                            FontFamily="Segoe fluent icons"
                            FontSize="15"
                            Glyph="&#xe711;" />
                        <ToolTipService.ToolTip>
                            <StackPanel>
                                <TextBlock FontWeight="SemiBold" Style="{ThemeResource CaptionTextBlockStyle}">Stop navigation</TextBlock>
                                <TextBlock Style="{ThemeResource CaptionTextBlockStyle}">Stop the current web page from loading.</TextBlock>
                            </StackPanel>
                        </ToolTipService.ToolTip>
                    </Button>

                    <ToggleButton
                        x:Name="controlCenterToggleButton"
                        Grid.Column="1"
                        Margin="0,4,5,0"
                        Padding="7"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Background="Transparent"
                        BorderBrush="{x:Null}"
                        Click="controlCenterToggleButton_Click"
                        Visibility="Collapsed">
                        <FontIcon
                            FontFamily="Segoe Fluent Icons"
                            FontSize="15"
                            Glyph="&#xE011;" />

                        <!--<Flyout ShouldConstrainToRootBounds="False">
													<StackPanel Width="180">
														<StackPanel Name="menuheader">
															<Button HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" BorderBrush="Transparent" Background="Transparent" Margin="0,0,0,10">
																<StackPanel Orientation="Horizontal">
																	<PersonPicture ProfilePicture="ms-appx:///accountpictures/clippy.png" Width="45"/>
																	<StackPanel Margin="10,0,0,0" VerticalAlignment="Center">
																		<TextBlock Style="{ThemeResource SubtitleTextBlockStyle}" FontSize="15" Text="Radon User"/>
																		<TextBlock Text="Local account" FontSize="12"/>
																	</StackPanel>
																</StackPanel>
															</Button>
															<Border BorderBrush="{ThemeResource ApplicationForegroundThemeBrush}" Opacity="0.3" Margin="10,5,10,10" BorderThickness="1"/>

															<Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
																	HorizontalContentAlignment="Left" Margin="0,0,0,0" IsEnabled="False">
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE734;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="Favorites"/>
																</StackPanel>
															</Button>

															<Button x:Name="HistoryButton" Click="HistoryButton_Click" Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
																	HorizontalContentAlignment="Left">
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE81C;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="History"/>
																</StackPanel>
															</Button>
															<Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
																	HorizontalContentAlignment="Left" x:Name="downloadbutton" Click="downloadbutton_Click" >
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE896;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="Downloads"/>
																</StackPanel>
															</Button>
															<Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
																	HorizontalContentAlignment="Left" x:Name="fullscreenbutton" Click="fullscreenbutton_Click">
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE740;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="Fullscreen (beta)"/>
																</StackPanel>
															</Button>
															<Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
																	HorizontalContentAlignment="Left" x:Name="printbutton" Click="printbutton_Click" IsEnabled="False">
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE749;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="Print"/>
																</StackPanel>
															</Button>
															<Slider x:Name="ZoomSlider" ValueChanged="ZoomSlider_ValueChanged"/>
															<Border BorderBrush="{ThemeResource ApplicationForegroundThemeBrush}" Opacity="0.3" Margin="10,10" BorderThickness="1"/>
															<Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
																	HorizontalContentAlignment="Left" IsEnabled="False">
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE90F;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="More tools" />
																</StackPanel>
															</Button>
															<Button x:Name="SettingsPageButton" Click="SettingsPageButton_Click" Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
																	HorizontalContentAlignment="Left">
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE713;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="Settings (beta)"/>
																</StackPanel>
															</Button>
															<Button x:Name="ChangeThemeButton" Click="ChangeThemeButton_Click" Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
															HorizontalContentAlignment="Left">
																<Button.Flyout>
																	<Flyout>
																		<TextBlock Text="Hello"/>
																	</Flyout>
																</Button.Flyout>
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xe771;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="Change theme (beta)"/>
																</StackPanel>
															</Button>
															<Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
															x:Name="aboutbutton" Click="AboutMenuItem_Click" HorizontalContentAlignment="Left">
																<StackPanel Orientation="Horizontal">
																	<FontIcon Glyph="&#xE946;" FontSize="15"/>
																	<TextBlock Margin="10,0,0,0" Text="About"/>
																</StackPanel>
															</Button>
														</StackPanel>
													</StackPanel>
												</Flyout>-->


                    </ToggleButton>

                    <BitmapIcon
                        x:Name="faviconicon"
                        Grid.Column="1"
                        Width="18"
                        Height="18"
                        Margin="50,0,0,0"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center" />

                    <!--  settings flyout  -->
                    <!--<Button x:Name="MenuButton" BorderBrush="Transparent"
                    Grid.Column="1" HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Background="Transparent" CornerRadius="12"
                    BorderThickness="0"
                    Margin="0,0,-10,0"
                    Grid.Row="0" Width="56"
                    >
                        <winui:PersonPicture ProfilePicture="ms-appx:///accountpictures/clippy.png" Width="28" BorderBrush="{ThemeResource SystemAccentColor}" BorderThickness="1"/>
                        <Button.Flyout>
                    <Flyout ShouldConstrainToRootBounds="False">
                        <StackPanel Width="180">
                            <StackPanel Name="menuheader">
                                        <Button HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" BorderBrush="Transparent" Background="Transparent" Margin="0,0,0,10">
                                            <StackPanel Orientation="Horizontal">
                                                <PersonPicture ProfilePicture="ms-appx:///accountpictures/clippy.png" Width="45"/>
                                                <StackPanel Margin="10,0,0,0" VerticalAlignment="Center">
                                                    <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}" FontSize="15" Text="Radon User"/>
                                                    <TextBlock Text="Local account" FontSize="12"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Button>
                                        <Border BorderBrush="{ThemeResource ApplicationForegroundThemeBrush}" Opacity="0.3" Margin="10,5,10,10" BorderThickness="1"/>

                                <Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left" Margin="0,0,0,0" IsEnabled="False">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE734;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="Favorites"/>
                                    </StackPanel>
                                </Button>

                                <Button x:Name="HistoryButton" Click="HistoryButton_Click" Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE81C;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="History"/>
                                    </StackPanel>
                                </Button>
                                <Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left" x:Name="downloadbutton" Click="downloadbutton_Click" >
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE896;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="Downloads"/>
                                    </StackPanel>
                                </Button>
                                <Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left" x:Name="fullscreenbutton" Click="fullscreenbutton_Click">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE740;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="Fullscreen (beta)"/>
                                    </StackPanel>
                                </Button>
                                <Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left" x:Name="printbutton" Click="printbutton_Click" IsEnabled="False">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE749;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="Print"/>
                                    </StackPanel>
                                </Button>
                                        <Slider x:Name="ZoomSlider" ValueChanged="ZoomSlider_ValueChanged"/>
                                        <Border BorderBrush="{ThemeResource ApplicationForegroundThemeBrush}" Opacity="0.3" Margin="10,10" BorderThickness="1"/>
                                <Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left" IsEnabled="False">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE90F;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="More tools" />
                                    </StackPanel>
                                </Button>
                                <Button x:Name="SettingsPageButton" Click="SettingsPageButton_Click" Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        HorizontalContentAlignment="Left">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE713;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="Settings (beta)"/>
                                    </StackPanel>
                                </Button>
                                <Button x:Name="ChangeThemeButton" Click="ChangeThemeButton_Click" Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                HorizontalContentAlignment="Left">
                                            <Button.Flyout>
                                                <Flyout>
                                                    <TextBlock Text="Hello"/>
                                                </Flyout>
                                            </Button.Flyout>
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xe771;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="Change theme (beta)"/>
                                    </StackPanel>
                                </Button>
                                        <Button Background="Transparent" BorderBrush="Transparent" HorizontalAlignment="Stretch"
                                        x:Name="aboutbutton" Click="AboutMenuItem_Click" HorizontalContentAlignment="Left">
                                    <StackPanel Orientation="Horizontal">
                                        <FontIcon Glyph="&#xE946;" FontSize="15"/>
                                        <TextBlock Margin="10,0,0,0" Text="About"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </StackPanel>
                    </Flyout>
                </Button.Flyout>



            </Button>-->

                    <winui:TabView
                        x:Name="BrowserTabs"
                        Grid.Row="1"
                        Grid.ColumnSpan="4"
                        Margin="0,-3,0,0"
                        VerticalAlignment="Stretch"
                        HorizontalContentAlignment="Center"
                        AddTabButtonClick="BrowserTabs_AddTabButtonClick"
                        IsAddTabButtonVisible="True"
                        SelectionChanged="BrowserTabs_SelectionChanged"
                        TabCloseRequested="BrowserTabs_TabCloseRequested"
                        TabItemsSource="{x:Bind CurrentTabs}"
                        TabWidthMode="Equal">
                        <winui:TabView.TabStripHeader>
                            <Grid>
                                <Grid.ChildrenTransitions>
                                    <TransitionCollection>
                                        <EntranceThemeTransition IsStaggeringEnabled="True" />
                                        <RepositionThemeTransition />
                                    </TransitionCollection>
                                </Grid.ChildrenTransitions>

                                <StackPanel
                                    Margin="8,0,0,0"
                                    HorizontalAlignment="Right"
                                    Orientation="Horizontal">
                                    <!--  TODO: The button should add a new tab  -->

                                    <Grid
                                        x:Name="compacttitlebar_rightpadding"
                                        Width="40"
                                        Visibility="Collapsed" />
                                </StackPanel>
                                <Grid x:Name="tabaction" />
                                <Grid
                                    x:Name="compactuibar"
                                    Margin="45,0"
                                    Visibility="Collapsed">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition
                                            x:Name="compactnavbar"
                                            Width="*"
                                            MinWidth="100" />
                                        <ColumnDefinition
                                            x:Name="compactsearchbar"
                                            Width="999*"
                                            MaxWidth="400" />
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Orientation="Horizontal">
                                        <Button
                                            x:Name="CompactBackButton"
                                            Margin="12,5,10,5"
                                            Padding="6"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Click="BackButton_Click"
                                            ToolTipService.ToolTip="Back">
                                            <FontIcon
                                                FontFamily="Segoe Fluent Icons"
                                                FontSize="20"
                                                Glyph="&#xe760;" />
                                        </Button>
                                        <Button
                                            x:Name="CompactNavOverflowButton"
                                            Padding="8.5"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Click="HomeButton_Click"
                                            ToolTipService.ToolTip="Navigation options">
                                            <FontIcon
                                                FontFamily="Segoe Fluent Icons"
                                                FontSize="18"
                                                Glyph="&#xe712;" />
                                            <Button.Flyout>
                                                <MenuFlyout>
                                                    <MenuFlyoutItem
                                                        Width="150"
                                                        Click="ForwardButton_Click"
                                                        Icon="Forward"
                                                        Text="Forward" />
                                                    <MenuFlyoutItem
                                                        Width="150"
                                                        Click="RefreshButton_Click"
                                                        Icon="Refresh"
                                                        Text="Refresh" />
                                                    <MenuFlyoutItem
                                                        Width="150"
                                                        Icon="Document"
                                                        Text="Stop loading" />
                                                    <MenuFlyoutItem
                                                        Width="150"
                                                        Click="HomeButton_Click"
                                                        Icon="Home"
                                                        Text="Start page" />
                                                </MenuFlyout>
                                            </Button.Flyout>
                                        </Button>

                                        <!--  TODO: The button should add a new tab  -->
                                        <Button
                                            Width="48"
                                            VerticalAlignment="Center"
                                            Style="{ThemeResource PaneToggleButtonStyle}"
                                            Visibility="Collapsed">
                                            <Button.Flyout>
                                                <Flyout />
                                            </Button.Flyout>
                                        </Button>
                                    </StackPanel>
                                    <AutoSuggestBox
                                        x:Name="CompactSearchBar"
                                        Grid.Column="1"
                                        Height="25"
                                        Margin="13,0,15,0"
                                        Padding="36,6,6,0"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        BorderThickness="0"
                                        CornerRadius="8"
                                        FontWeight="SemiBold"
                                        GotFocus="SearchBar_GotFocus"
                                        KeyDown="CompactSearchBar_KeyDown"
                                        PlaceholderText="Search the web or enter a URL" />
                                    <winui:ProgressBar
                                        x:Name="compactloadingbar"
                                        Margin="21,0,23,5"
                                        VerticalAlignment="Bottom"
                                        IsIndeterminate="True" />
                                </Grid>
                            </Grid>
                        </winui:TabView.TabStripHeader>
                        <winui:TabView.TabStripFooter>
                            <StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
                                <StackPanel.ChildrenTransitions>
                                    <TransitionCollection>
                                        <EntranceThemeTransition IsStaggeringEnabled="True" />
                                    </TransitionCollection>
                                </StackPanel.ChildrenTransitions>


                                <Button
                                    x:Name="controlCenterButton"
                                    Grid.Column="1"
                                    Margin="0,4,5,0"
                                    Padding="10,6.8"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    Background="Transparent"
                                    BorderBrush="{x:Null}"
                                    Click="controlCenterToggleButton_Click">
                                    <FontIcon
                                        FontFamily="Segoe Fluent Icons"
                                        FontSize="17"
                                        Glyph="&#xE712;" />
                                    <Button.Flyout>
                                        <Flyout
                                            x:Name="RadonOverflowMenu"
                                            Placement="LeftEdgeAlignedTop"
                                            ShouldConstrainToRootBounds="False">
                                            <ScrollViewer
                                                Margin="-8"
                                                Padding="0"
                                                CornerRadius="8"
                                                VerticalScrollBarVisibility="Auto">
                                                <Grid Margin="0,2">

                                                    <StackPanel>

                                                        <Grid Margin="0,0,0,8">
                                                            <Grid.ChildrenTransitions>
                                                                <TransitionCollection>
                                                                    <EntranceThemeTransition IsStaggeringEnabled="True" />
                                                                </TransitionCollection>
                                                            </Grid.ChildrenTransitions>
                                                            <Button
                                                                Margin="4,0"
                                                                Padding="7"
                                                                HorizontalAlignment="Left"
                                                                Background="{x:Null}"
                                                                BorderThickness="0"
                                                                ToolTipService.ToolTip="Go to home">
                                                                <FontIcon
                                                                    FontFamily="Segoe Fluent Icons"
                                                                    FontSize="17"
                                                                    Glyph="&#xEA8A;" />
                                                            </Button>
                                                            <Button
                                                                Margin="37,0"
                                                                HorizontalAlignment="Right"
                                                                Content="Log out"
                                                                Style="{ThemeResource TextBlockButtonStyle}" />
                                                            <Button
                                                                Margin="4,0"
                                                                Padding="4"
                                                                HorizontalAlignment="Right"
                                                                Background="{x:Null}"
                                                                BorderThickness="0"
                                                                Click="editprofile_Click"
                                                                ToolTipService.ToolTip="Radon user">
                                                                <winui:PersonPicture Width="30" HorizontalAlignment="Right" />
                                                            </Button>
                                                        </Grid>
                                                        <Grid>
                                                            <StackPanel Orientation="Horizontal">

                                                                <Button
                                                                    Width="98"
                                                                    Padding="0,10,0,10"
                                                                    HorizontalAlignment="Stretch"
                                                                    Background="Transparent"
                                                                    BorderThickness="0"
                                                                    Click="addtab_button_Click">
                                                                    <StackPanel>
                                                                        <FontIcon
                                                                            FontFamily="Segoe Fluent Icons"
                                                                            FontSize="18"
                                                                            Glyph="&#xEC6C;" />
                                                                        <TextBlock
                                                                            Margin="0,8"
                                                                            Text="New tab"
                                                                            TextAlignment="Center" />
                                                                    </StackPanel>
                                                                </Button>
                                                                <Border
                                                                    Margin="0,8"
                                                                    BorderBrush="{ThemeResource MenuFlyoutSeparatorThemeBrush}"
                                                                    BorderThickness="1"
                                                                    Opacity="0.3" />
                                                                <Button
                                                                    x:Name="newWindow"
                                                                    Width="98"
                                                                    Padding="0,10,0,10"
                                                                    HorizontalAlignment="Stretch"
                                                                    Background="Transparent"
                                                                    BorderThickness="0"
                                                                    Click="newWindow_Click">
                                                                    <StackPanel>
                                                                        <FontIcon
                                                                            FontFamily="Segoe Fluent Icons"
                                                                            FontSize="18"
                                                                            Glyph="&#xE737;" />
                                                                        <TextBlock
                                                                            Margin="0,8"
                                                                            Text="New window"
                                                                            TextAlignment="Center" />
                                                                    </StackPanel>
                                                                </Button>
                                                                <Border
                                                                    Margin="0,8"
                                                                    BorderBrush="{ThemeResource MenuFlyoutSeparatorThemeBrush}"
                                                                    BorderThickness="1"
                                                                    Opacity="0.3" />


                                                                <Button
                                                                    Width="98"
                                                                    Padding="0,10,0,10"
                                                                    HorizontalAlignment="Stretch"
                                                                    Background="Transparent"
                                                                    BorderThickness="0">
                                                                    <StackPanel>
                                                                        <FontIcon
                                                                            FontFamily="Segoe Fluent Icons"
                                                                            FontSize="18"
                                                                            Glyph="&#xE621;" />
                                                                        <TextBlock
                                                                            Margin="0,8"
                                                                            Text="New InPrivate"
                                                                            TextAlignment="Center"
                                                                            TextWrapping="WrapWholeWords" />
                                                                    </StackPanel>
                                                                </Button>
                                                            </StackPanel>
                                                        </Grid>
                                                        <Border
                                                            Margin="8,4"
                                                            BorderBrush="{ThemeResource MenuFlyoutSeparatorThemeBrush}"
                                                            BorderThickness="1"
                                                            Opacity="0.3" />

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent"
                                                            Click="downloadbutton_Click">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xE118;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Downloads" />
                                                            </StackPanel>
                                                        </Button>

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xF738;" />
                                                                <TextBlock Margin="9,0,0,0" Text="History" />
                                                            </StackPanel>
                                                        </Button>

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="17" Glyph="&#xE006;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Favorites" />
                                                            </StackPanel>
                                                        </Button>
                                                        <Border
                                                            Margin="8,0"
                                                            BorderBrush="{ThemeResource MenuFlyoutSeparatorThemeBrush}"
                                                            BorderThickness="1"
                                                            Opacity="0.3" />
                                                        <Grid>
                                                            <StackPanel
                                                                Margin="12,0"
                                                                HorizontalAlignment="Stretch"
                                                                Orientation="Horizontal">
                                                                <FontIcon
                                                                    FontFamily="Segoe Fluent Icons"
                                                                    FontSize="17"
                                                                    Glyph="&#xE8A3;" />
                                                                <TextBlock
                                                                    Margin="8,0"
                                                                    VerticalAlignment="Center"
                                                                    Text="Zoom" />
                                                            </StackPanel>
                                                            <Button
                                                                Margin="110,0"
                                                                Padding="7"
                                                                HorizontalAlignment="Right"
                                                                Background="{x:Null}"
                                                                BorderThickness="0"
                                                                Click="fullscreenbutton_Click">
                                                                <FontIcon
                                                                    x:Name="fullscreenbutton_icon"
                                                                    FontFamily="Segoe Fluent Icons"
                                                                    FontSize="15"
                                                                    Glyph="&#xE740;" />
                                                            </Button>
                                                            <winui:DropDownButton
                                                                Width="95"
                                                                Margin="4,4"
                                                                HorizontalAlignment="Right"
                                                                HorizontalContentAlignment="Left"
                                                                Content="100%">
                                                                <winui:DropDownButton.Flyout>
                                                                    <MenuFlyout Placement="BottomEdgeAlignedRight">
                                                                        <MenuFlyoutItem Text="25%" />
                                                                        <MenuFlyoutItem Text="50%" />
                                                                        <MenuFlyoutItem Text="75%" />
                                                                        <MenuFlyoutItem Text="100%" />
                                                                        <MenuFlyoutItem Text="125%" />
                                                                        <MenuFlyoutItem Text="150%" />
                                                                        <MenuFlyoutItem Text="200%" />
                                                                        <MenuFlyoutItem Text="300%" />
                                                                        <MenuFlyoutItem Text="500%" />
                                                                    </MenuFlyout>
                                                                </winui:DropDownButton.Flyout>
                                                            </winui:DropDownButton>
                                                        </Grid>
                                                        <Border
                                                            Margin="8,0"
                                                            BorderBrush="{ThemeResource MenuFlyoutSeparatorThemeBrush}"
                                                            BorderThickness="1"
                                                            Opacity="0.3" />
                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xE118;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Share" />
                                                                <FontIcon
                                                                    Margin="201,0,0,0"
                                                                    FontFamily="Segoe Fluent Icons"
                                                                    FontSize="14"
                                                                    Glyph="&#xE097;" />
                                                            </StackPanel>
                                                            <Button.Flyout>
                                                                <MenuFlyout Placement="RightEdgeAlignedTop" ShouldConstrainToRootBounds="False">
                                                                    <MenuFlyoutItem
                                                                        x:Name="copyurltoclipboardBtn"
                                                                        Click="copyurltoclipboardBtn_Click"
                                                                        Text="Copy URL to clipboard">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE8C8;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                    <MenuFlyoutItem Text="Email link">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE119;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                    <MenuFlyoutItem
                                                                        x:Name="continueonmobileBtn"
                                                                        Click="continueonmobileBtn_Click"
                                                                        Text="Continue on mobile">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xe8ea;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                    <MenuFlyoutSeparator />
                                                                    <MenuFlyoutItem Text="More sharing options">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE712;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                </MenuFlyout>
                                                            </Button.Flyout>

                                                        </Button>

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xE792;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Save page as" />
                                                            </StackPanel>
                                                        </Button>

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="17" Glyph="&#xE74F;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Toggle mute tab" />
                                                            </StackPanel>
                                                        </Button>

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xE749;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Print" />
                                                            </StackPanel>
                                                        </Button>

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xE722;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Snipping tool" />
                                                                <FontIcon
                                                                    Margin="154,0,0,0"
                                                                    FontFamily="Segoe Fluent Icons"
                                                                    FontSize="14"
                                                                    Glyph="&#xE097;" />
                                                            </StackPanel>
                                                            <Button.Flyout>
                                                                <MenuFlyout Placement="RightEdgeAlignedTop" ShouldConstrainToRootBounds="False">
                                                                    <MenuFlyoutItem Text="Copy URL to clipboard">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE8C8;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                    <MenuFlyoutItem Text="Email link">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE119;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                    <MenuFlyoutItem Text="Save as TXT">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE792;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                    <MenuFlyoutSeparator />
                                                                    <MenuFlyoutItem Text="More sharing options">
                                                                        <MenuFlyoutItem.Icon>
                                                                            <FontIcon FontFamily="Segoe Fluent Icons" Glyph="&#xE712;" />
                                                                        </MenuFlyoutItem.Icon>
                                                                    </MenuFlyoutItem>
                                                                </MenuFlyout>
                                                            </Button.Flyout>
                                                        </Button>
                                                        <Border
                                                            Margin="8,0"
                                                            BorderBrush="{ThemeResource MenuFlyoutSeparatorThemeBrush}"
                                                            BorderThickness="1"
                                                            Opacity="0.3" />

                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xf1ad;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Experiments" />
                                                            </StackPanel>
                                                        </Button>
                                                        <Button
                                                            Margin="1,2"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Left"
                                                            Background="Transparent"
                                                            BorderBrush="Transparent">
                                                            <StackPanel Orientation="Horizontal">
                                                                <FontIcon FontSize="15" Glyph="&#xE9E9;" />
                                                                <TextBlock Margin="9,0,0,0" Text="Settings" />
                                                            </StackPanel>
                                                        </Button>



                                                    </StackPanel>
                                                </Grid>
                                            </ScrollViewer>
                                        </Flyout>
                                    </Button.Flyout>
                                </Button>

                            </StackPanel>
                        </winui:TabView.TabStripFooter>
                        <!--<winui:TabView.Transitions>
                            <RepositionThemeTransition/>
                            <AddDeleteThemeTransition/>
                        </winui:TabView.Transitions>-->


                    </winui:TabView>
                    <winui:ProgressBar
                        x:Name="loadingbar"
                        Grid.RowSpan="2"
                        Grid.ColumnSpan="4"
                        VerticalAlignment="Top"
                        IsIndeterminate="True"
                        Visibility="Visible" />
                    <Grid
                        Grid.Row="1"
                        Grid.ColumnSpan="4"
                        Width="335"
                        Margin="12,44,8,8"
                        HorizontalAlignment="Right"
                        CornerRadius="8">
                        <!--<winui:WebView2 Source="https://adamw.uk/bingai"/>-->
                    </Grid>
                    <Button
                        x:Name="fullscreentopbar"
                        Grid.Row="1"
                        Grid.ColumnSpan="4"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Top"
                        Background="Transparent"
                        BorderBrush="{x:Null}"
                        Canvas.ZIndex="3"
                        Click="fullscreentopbar_Click"
                        ClickMode="Hover"
                        Visibility="Collapsed" />

                </Grid>

            </Grid>

            <winui:TeachingTip
                x:Name="actionMsg"
                Padding="8"
                Background="{ThemeResource SystemControlAltLowAcrylicWindowBrush}"
                PlacementMargin="0,64,0,0"
                PreferredPlacement="Top">
                <Grid Margin="-12">
                    <StackPanel
                        Margin="12"
                        Orientation="Horizontal"
                        Spacing="8">
                        <FontIcon x:Name="actionMsg_Icon" Glyph="&#xe790;" />
                        <TextBlock
                            x:Name="actionMsg_Text"
                            Margin="0,0,24,0"
                            Style="{ThemeResource BaseTextBlockStyle}"
                            Text="Link copied to clipboard!" />
                    </StackPanel>
                    <winui:ProgressBar
                        x:Name="actionMsg_Timeout"
                        Margin="0"
                        VerticalAlignment="Bottom"
                        Background="Transparent"
                        Foreground="{ThemeResource DefaultTextForegroundThemeBrush}"
                        Maximum="300"
                        Value="100" />
                </Grid>
            </winui:TeachingTip>

        </Grid>
        <Popup
            x:Name="ThemePopup"
            HorizontalAlignment="Center"
            IsOpen="False">
            <Popup.ChildTransitions>
                <TransitionCollection>
                    <PopupThemeTransition />
                </TransitionCollection>
            </Popup.ChildTransitions>

            <StackPanel
                Padding="10"
                HorizontalAlignment="Center"
                Background="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}"
                CornerRadius="8">
                <TextBlock
                    HorizontalAlignment="Center"
                    Style="{ThemeResource SubtitleTextBlockStyle}"
                    Text="Pick a theme:"
                    TextAlignment="Center" />
                <ComboBox
                    x:Name="ThemePickerComboBox"
                    Width="300"
                    Margin="0,10,0,0"
                    SelectionChanged="ThemePickerComboBox_SelectionChanged">
                    <ComboBoxItem Content="None" />
                    <ComboBoxItem Content="Unknown" />
                    <ComboBoxItem Content="Forest" />
                    <ComboBoxItem Content="Candy" />
                    <ComboBoxItem Content="Midnight" />
                    <ComboBoxItem Content="Azure" />
                    <ComboBoxItem Content="Maple" />
                    <ComboBoxItem Content="Unknown1" />
                    <ComboBoxItem Content="Rainbow" />
                    <ComboBoxItem Content="Deep Blue" />
                    <ComboBoxItem Content="Sweet" />
                    <ComboBoxItem Content="Dreamy" />
                    <ComboBoxItem Content="Abstractic [Experimental]" />
                    <ComboBoxItem Content="Garden of Peace [Experimental]" />
                    <ComboBoxItem Content="Neon [Experimental]" />
                    <ComboBoxItem Content="Purple Sky [Experimental]" />
                    <ComboBoxItem Content="Tokyo Night [Experimental]" />
                </ComboBox>
                <Button
                    x:Name="ThemePopupDoneButton"
                    Margin="0,20,0,0"
                    HorizontalAlignment="Stretch"
                    Click="ThemePopupDoneButton_Click"
                    Content="Done"
                    Style="{ThemeResource AccentButtonStyle}" />
            </StackPanel>
        </Popup>

        <!--#region ControlCenter-->
        <Popup
            x:Name="controlCenter"
            Margin="0,76,308,90"
            HorizontalAlignment="Right"
            Closed="controlCenter_Closed"
            IsLightDismissEnabled="True">
            <Popup.ChildTransitions>
                <TransitionCollection>
                    <PaneThemeTransition Edge="Top" />
                </TransitionCollection>
            </Popup.ChildTransitions>


            <Grid Height="Auto" />
        </Popup>
        <!--#endregion-->
        <!--#endregion-->


        <Popup x:Name="sidebarSearch">
            <Popup.ChildTransitions>
                <TransitionCollection>
                    <EdgeUIThemeTransition Edge="Right" />
                </TransitionCollection>
            </Popup.ChildTransitions>
            <Popup.Child>
                <Grid
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource SystemBaseLowColor}"
                    BorderThickness="1"
                    CornerRadius="8">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40" />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" />
                    <winui:WebView2
                        Grid.Row="1"
                        Margin="10"
                        Source="https://google.com" />
                </Grid>
            </Popup.Child>
        </Popup>


        <!--#region profileCenterPopup-->

        <Popup
            x:Name="profileCenter"
            Margin="-908,83"
            HorizontalAlignment="Right"
            Closed="profileCenter_Closed"
            IsOpen="True"
            Opened="profileCenter_Opened">
            <Popup.ChildTransitions>
                <TransitionCollection>
                    <PopupThemeTransition />
                </TransitionCollection>
            </Popup.ChildTransitions>

            <Grid
                Width="600"
                Padding="10"
                Background="{ThemeResource SystemControlAcrylicWindowBrush}"
                BorderBrush="{ThemeResource SystemBaseLowColor}"
                BorderThickness="1"
                CornerRadius="8">
                <Grid.ChildrenTransitions>
                    <TransitionCollection>
                        <EntranceThemeTransition IsStaggeringEnabled="True" />
                    </TransitionCollection>
                </Grid.ChildrenTransitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <StackPanel Margin="8,0">
                    <TextBlock
                        Margin="0,10,0,20"
                        FontWeight="Semibold"
                        Text="Profile"
                        TextAlignment="Center" />

                    <StackPanel Margin="8,0,0,20" Orientation="Horizontal">
                        <PersonPicture Width="48" />
                        <StackPanel Margin="8,0,0,0" VerticalAlignment="Center">
                            <TextBlock
                                x:Name="profileCenter_UsernameHeader"
                                FontSize="18"
                                FontWeight="Semibold" />
                            <Button
                                Margin="0,4,0,0"
                                Padding="0"
                                Click="editprofile_Click"
                                Content="Edit profile"
                                Style="{ThemeResource TextBlockButtonStyle}" />
                        </StackPanel>
                    </StackPanel>
                    <Border
                        Margin="25,30"
                        BorderBrush="White"
                        BorderThickness="1"
                        Opacity="0.5" />
                    <TextBlock
                        Margin="0,0,0,20"
                        FontWeight="Semibold"
                        Text="Recent"
                        TextAlignment="Center" />
                    <StackPanel Margin="0,0,10,0">
                        <StackPanel.ChildrenTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition IsStaggeringEnabled="True" />
                            </TransitionCollection>
                        </StackPanel.ChildrenTransitions>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="(9+) f h k r l  on Twitter • 89 Tweets"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="GitHub - itzbluebxrry/Project-Radon"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="Modestep - WIP • Spotify"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="503 Forbidden - nginx"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="how to code brainf*ck - Google Search"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            Margin="0,7"
                            HorizontalAlignment="Center"
                            Content="Show full history"
                            Style="{ThemeResource TextBlockButtonStyle}" />


                    </StackPanel>
                </StackPanel>
                <Border
                    Margin="0,20"
                    HorizontalAlignment="Right"
                    BorderBrush="White"
                    BorderThickness="1"
                    Opacity="0.5" />


                <StackPanel Grid.Column="1" Margin="20,10">
                    <StackPanel.ChildrenTransitions>
                        <TransitionCollection>
                            <EntranceThemeTransition IsStaggeringEnabled="True" />
                        </TransitionCollection>
                    </StackPanel.ChildrenTransitions>
                    <TextBlock
                        Margin="0,0,0,20"
                        FontWeight="Semibold"
                        Text="Activity"
                        TextAlignment="Center" />
                    <TextBlock
                        Margin="0,0,0,0"
                        FontSize="32"
                        FontWeight="Semibold"
                        Text="1h 32min" />
                    <TextBlock
                        FontSize="18"
                        FontWeight="light"
                        Text="spent on the Internet today" />

                    <TextBlock
                        Margin="0,20,0,0"
                        FontWeight="Semibold"
                        Text="Top sites"
                        TextAlignment="Center" />
                    <StackPanel Margin="0,8,10,0">
                        <StackPanel.ChildrenTransitions>
                            <TransitionCollection>
                                <EntranceThemeTransition IsStaggeringEnabled="True" />
                            </TransitionCollection>
                        </StackPanel.ChildrenTransitions>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="open.spotify.com"
                                    TextTrimming="Clip" />
                                <TextBlock
                                    Margin="0"
                                    Opacity="0.7"
                                    Text="4h 53min"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="youtube.com"
                                    TextTrimming="Clip" />
                                <TextBlock
                                    Margin="0"
                                    Opacity="0.7"
                                    Text="2h 12min"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="discord.com"
                                    TextTrimming="Clip" />
                                <TextBlock
                                    Margin="0"
                                    Opacity="0.7"
                                    Text="1h 59min"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>
                        <Button
                            HorizontalAlignment="Stretch"
                            Background="{x:Null}"
                            BorderBrush="{x:Null}">
                            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                                <FontIcon
                                    FontFamily="FluentSystemIcons-Regular"
                                    FontSize="18"
                                    Glyph="&#xF379;" />
                                <TextBlock
                                    Margin="8,0"
                                    Text="chat.openai.com"
                                    TextTrimming="Clip" />
                                <TextBlock
                                    Margin="0"
                                    Opacity="0.7"
                                    Text="47 min"
                                    TextTrimming="Clip" />
                            </StackPanel>
                        </Button>


                    </StackPanel>
                </StackPanel>
            </Grid>
        </Popup>
        <Popup
            x:Name="fullscreentopbar_flyout"
            Margin="0,-8,636,0"
            HorizontalAlignment="Center"
            Canvas.ZIndex="3"
            IsLightDismissEnabled="True"
            IsOpen="False">
            <Popup.ChildTransitions>
                <TransitionCollection>
                    <EdgeUIThemeTransition Edge="Top" />
                </TransitionCollection>
            </Popup.ChildTransitions>

            <Grid
                Height="48"
                HorizontalAlignment="Stretch"
                CornerRadius="12">
                <Grid.Background>
                    <ImageBrush
                        x:Name="fullscreentopbarbackground"
                        ImageSource="ms-appx:///wallpapers/10.png"
                        Opacity="0.7" />
                </Grid.Background>
                <Grid Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}">
                    <StackPanel Margin="8,8,8,0" Orientation="Horizontal">
                        <Button
                            Margin="0,2,5,0"
                            Padding="3,6"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="BackButton_Click"
                            ClickMode="Press"
                            ToolTipService.ToolTip="Back">


                            <FontIcon
                                FontFamily="Segoe Fluent Icons"
                                FontSize="20"
                                Glyph="&#xe973;"
                                Translation="0,0,0">
                                <FontIcon.TranslationTransition>
                                    <Vector3Transition />
                                </FontIcon.TranslationTransition>
                            </FontIcon>
                        </Button>
                        <Button
                            Margin="0,2,5,0"
                            Padding="3,6"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="ForwardButton_Click"
                            ClickMode="Press"
                            ToolTipService.ToolTip="Forward">
                            <FontIcon
                                FontFamily="segoe fluent icons"
                                FontSize="20"
                                Glyph="&#xe974;"
                                Translation="0,0,0">
                                <FontIcon.TranslationTransition>
                                    <Vector3Transition />
                                </FontIcon.TranslationTransition>
                            </FontIcon>
                        </Button>
                        <TextBox
                            Grid.Column="1"
                            Width="400"
                            Height="21"
                            Margin="43,0,45,0"
                            Padding="30,6,30,2"
                            VerticalAlignment="Center"
                            VerticalContentAlignment="Center"
                            BorderThickness="0"
                            CharacterSpacing="1"
                            CornerRadius="8"
                            FontSize="13"
                            FontWeight="Medium"
                            GotFocus="SearchBar_GotFocus"
                            IsSpellCheckEnabled="False"
                            KeyDown="SearchBar_KeyDown"
                            LostFocus="SearchBar_LostFocus"
                            PlaceholderForeground="{ThemeResource ContentDialogDimmingThemeBrush}"
                            PlaceholderText="Search the web or enter a URL"
                            TextAlignment="Center" />
                        <Button
                            Grid.Column="1"
                            Margin="0,0,8,0"
                            Padding="6.5"
                            HorizontalAlignment="Right"
                            Background="{x:Null}"
                            BorderThickness="0"
                            Click="RefreshButton_Click"
                            CornerRadius="40"
                            PointerEntered="RefreshButton_PointerEntered"
                            ToolTipService.ToolTip="Reload">
                            <FontIcon
                                FontFamily="segoe fluent icons"
                                FontSize="13"
                                Glyph="&#xe72c;" />
                        </Button>
                        <Button
                            Grid.Column="1"
                            Margin="0,0,8,0"
                            Padding="6"
                            HorizontalAlignment="Right"
                            Background="Transparent"
                            BorderThickness="0"
                            Click="StopRefreshButton_Click"
                            CornerRadius="40"
                            ToolTipService.ToolTip="Stop navigation"
                            Visibility="Collapsed">
                            <FontIcon
                                FontFamily="Segoe fluent icons"
                                FontSize="15"
                                Glyph="&#xe711;" />
                        </Button>
                        <Button
                            Margin="4,0,8,0"
                            Padding="7"
                            HorizontalAlignment="Right"
                            Background="{x:Null}"
                            BorderThickness="0"
                            Click="fullscreenbutton_Click"
                            ToolTipService.ToolTip="Exit fullscreen view">
                            <FontIcon
                                FontFamily="Segoe Fluent Icons"
                                FontSize="15"
                                Glyph="&#xE73F;" />
                        </Button>
                    </StackPanel>
                </Grid>
            </Grid>

        </Popup>

        <!--#endregion-->

        <!--<Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" Width="250" HorizontalAlignment="Left" VerticalAlignment="Stretch">
            <ListView DropCompleted="verttablist_DropCompleted" x:Name="verttablist" SelectedIndex="{x:Bind BrowserTabs.SelectedIndex, Mode=TwoWay}" CanDragItems="True" AllowDrop="True" CanReorderItems="True">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="x:String">
                        <StackPanel Orientation="Horizontal">

                        </StackPanel>

                    </DataTemplate>
                </ListView.ItemTemplate>
                <ListViewItem HorizontalContentAlignment="Center" Content="{x:Bind BrowserTabs.SelectedIndex, Mode=TwoWay}"/>
                <ListViewItem HorizontalContentAlignment="Center" Content="leotrix - Google Search"/>
                <ListViewItem HorizontalContentAlignment="Center" Content="YouTube"/>
            </ListView>


        </Grid>-->

    </Grid>

</Page>
